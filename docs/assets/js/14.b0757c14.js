(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{280:function(a,t,s){"use strict";s.r(t);var e=s(10),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"手动安装教程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手动安装教程"}},[a._v("#")]),a._v(" 手动安装教程")]),a._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("以下安装过程大致如下：")]),a._v(" "),t("p",[a._v("Docker > Redis > MariaDB > Caddy > Trojan Panel > Trojan Panel UI > Trojan-go/Hysteria")]),a._v(" "),t("p",[a._v("以下是各应用的版本对应关系：")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("名称")]),a._v(" "),t("th",[a._v("版本")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[a._v("Docker")]),a._v(" "),t("td",[a._v("latest")])]),a._v(" "),t("tr",[t("td",[a._v("Redis")]),a._v(" "),t("td",[a._v("6.2.7")])]),a._v(" "),t("tr",[t("td",[a._v("MariaDB")]),a._v(" "),t("td",[a._v("10.7.3")])]),a._v(" "),t("tr",[t("td",[a._v("Caddy")]),a._v(" "),t("td",[a._v("1.0.3")])]),a._v(" "),t("tr",[t("td",[a._v("Trojan Panel")]),a._v(" "),t("td",[a._v("latest")])]),a._v(" "),t("tr",[t("td",[a._v("Trojan Panel UI")]),a._v(" "),t("td",[a._v("latest")])]),a._v(" "),t("tr",[t("td",[a._v("Trojan-go")]),a._v(" "),t("td",[a._v("latest")])]),a._v(" "),t("tr",[t("td",[a._v("Hysteria")]),a._v(" "),t("td",[a._v("latest")])])])]),a._v(" "),t("p",[t("img",{attrs:{src:"/docker-images.png",alt:"docker-images"}})]),a._v(" "),t("h2",{attrs:{id:"安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[a._v("#")]),a._v(" 安装Docker")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker官方安装教程：https://docs.docker.com/engine/install/")])]),a._v(" "),t("p",[a._v("注意：")]),a._v(" "),t("ol",[t("li",[a._v("如果是国内服务器需要设置Docker国内镜像源")])]),a._v(" "),t("h2",{attrs:{id:"安装redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装redis"}},[a._v("#")]),a._v(" 安装Redis")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker Hub：https://hub.docker.com/_/redis")])]),a._v(" "),t("ol",[t("li",[a._v("Pull the image")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull redis:6.2.7\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("Start a container")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name trojan-panel-redis --restart always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("trojan-panel-network "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${redis_port}")]),a._v(":6379 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${REDIS_DATA}")]),a._v(":/data redis:6.2.7 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nredis-server --requirepass "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${redis_pass}")]),a._v('"')]),a._v("\n")])])]),t("p",[a._v("参数解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name trojan-panel-redis")]),a._v("：定义容器的名称")]),a._v(" "),t("li",[t("code",[a._v("--restart always")]),a._v("：容器随着Docker启动而启动")]),a._v(" "),t("li",[t("code",[a._v("--network=trojan-panel-network")]),a._v("：使用桥接网络")]),a._v(" "),t("li",[t("code",[a._v("-p ${redis_port}:6379")]),a._v("：映射Redis端口")]),a._v(" "),t("li",[t("code",[a._v("-v ${REDIS_DATA}:/data")]),a._v("：映射Redis数据文件夹")]),a._v(" "),t("li",[t("code",[a._v('redis-server --requirepass "${redis_pass}"')]),a._v("：设置Redis密码为"),t("code",[a._v("${redis_pass}")])])]),a._v(" "),t("h2",{attrs:{id:"安装mariadb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装mariadb"}},[a._v("#")]),a._v(" 安装MariaDB")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker Hub：https://hub.docker.com/_/mariadb")])]),a._v(" "),t("ol",[t("li",[a._v("Pull the image")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull mariadb:10.7.3\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("Start a container")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name trojan-panel-mariadb --restart always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("trojan-panel-network "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${mariadb_port}")]),a._v(":3306 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${MARIA_DATA}")]),a._v(":/var/lib/mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_DATABASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"trojan_panel_db"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${mariadb_pas}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("TZ")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Asia/Shanghai "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nmariadb:10.7.3\n")])])]),t("p",[a._v("参数解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name trojan-panel-redis")]),a._v("：定义容器的名称")]),a._v(" "),t("li",[t("code",[a._v("--restart always")]),a._v("：容器随着Docker启动而启动")]),a._v(" "),t("li",[t("code",[a._v("--network=trojan-panel-network")]),a._v("：使用桥接网络")]),a._v(" "),t("li",[t("code",[a._v("-p ${mariadb_port}:3306")]),a._v("：映射MariaDB端口")]),a._v(" "),t("li",[t("code",[a._v("-v ${MARIA_DATA}:/var/lib/mysql")]),a._v("：映射MariaDB数据文件夹")]),a._v(" "),t("li",[t("code",[a._v('-e MYSQL_DATABASE="trojan_panel_db"')]),a._v("：容器启动时创建一个默认的"),t("code",[a._v("trojan_panel_db")]),a._v("库")]),a._v(" "),t("li",[t("code",[a._v('-e MYSQL_ROOT_PASSWORD="${mariadb_pas}"')]),a._v("：设置MariaDB密码为"),t("code",[a._v("${mariadb_pas}")])]),a._v(" "),t("li",[t("code",[a._v('-e TZ=Asia/Shanghai"')]),a._v("：设置时区为上海")])]),a._v(" "),t("p",[a._v("注意：")]),a._v(" "),t("ol",[t("li",[a._v("容器启动时必须有一个默认的"),t("code",[a._v("trojan_panel_db")]),a._v("库，如果你是自己的数据库，需要自己手动创建一个"),t("code",[a._v("trojan_panel_db")]),a._v("库")])]),a._v(" "),t("h2",{attrs:{id:"安装caddy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装caddy"}},[a._v("#")]),a._v(" 安装Caddy")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker Hub：https://hub.docker.com/r/teddysun/caddy")])]),a._v(" "),t("ol",[t("li",[a._v("Pull the image")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull teddysun/caddy:1.0.5\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("Start a container")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name trojan-panel-caddy --restart always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("trojan-panel-network "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${caddy_remote_port}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${caddy_remote_port}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_Caddyfile}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/etc/caddy/Caddyfile"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_ACME}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/root/.caddy/acme/acme-v02.api.letsencrypt.org/sites/"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_SRV}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_SRV}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\nteddysun/caddy:1.0.5\n")])])]),t("p",[a._v("参数解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name trojan-panel-redis")]),a._v("：定义容器的名称")]),a._v(" "),t("li",[t("code",[a._v("--restart always")]),a._v("：容器随着Docker启动而启动")]),a._v(" "),t("li",[t("code",[a._v("--network=trojan-panel-network")]),a._v("：使用桥接网络")]),a._v(" "),t("li",[t("code",[a._v("-p 80:80")]),a._v("：映射Caddy Web端口，建议"),t("code",[a._v("80")])]),a._v(" "),t("li",[t("code",[a._v("-p ${caddy_remote_port}:${caddy_remote_port}")]),a._v("：映射Caddy SSL端口，建议"),t("code",[a._v("443")])]),a._v(" "),t("li",[t("code",[a._v('-v ${CADDY_Caddyfile}:"/etc/caddy/Caddyfile"')]),a._v("：映射Caddyfile文件")]),a._v(" "),t("li",[t("code",[a._v('-v ${CADDY_ACME}:"/root/.caddy/acme/acme-v02.api.letsencrypt.org/sites/"')]),a._v("：映射证书文件夹")]),a._v(" "),t("li",[t("code",[a._v("-v ${CADDY_SRV}:${CADDY_SRV}")]),a._v("：映射伪装网站文件夹")])]),a._v(" "),t("h2",{attrs:{id:"安装trojan-panel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装trojan-panel"}},[a._v("#")]),a._v(" 安装Trojan Panel")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker Hub：https://hub.docker.com/r/jonssonyan/trojan-panel")])]),a._v(" "),t("ol",[t("li",[a._v("Pull the image")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull jonssonyan/trojan-panel\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("Start a container")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name trojan-panel --restart always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("trojan-panel-network "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8081")]),a._v(":8081 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_SRV}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TROJAN_PANEL_WEBFILE}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TROJAN_PANEL_LOGS}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TROJAN_PANEL_LOGS}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v /etc/localtime:/etc/localtime "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"mariadb_ip='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${mariadb_ip}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"mariadb_port='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${mariadb_port}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"mariadb_user='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${mariadb_user}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"mariadb_pas='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${mariadb_pas}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"redis_host='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${redis_host}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"redis_port='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${redis_port}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"redis_pass='),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${redis_pass}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\njonssonyan/trojan-panel\n")])])]),t("p",[a._v("参数解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name trojan-panel")]),a._v("：定义容器的名称")]),a._v(" "),t("li",[t("code",[a._v("--restart always")]),a._v("：容器随着Docker启动而启动")]),a._v(" "),t("li",[t("code",[a._v("--network=trojan-panel-network")]),a._v("：使用桥接网络")]),a._v(" "),t("li",[t("code",[a._v("-p 8081:8081")]),a._v("：映射Trojan Panel端口。注意要和 Trojan Panel UI 中 Nginx 转发的端口保持一致")]),a._v(" "),t("li",[t("code",[a._v("-v ${CADDY_SRV}:/tpdata/trojan-panel/webfile/")]),a._v("：映射伪装网站文件夹")]),a._v(" "),t("li",[t("code",[a._v("-v ${TROJAN_PANEL_LOGS}:/tpdata/trojan-panel/logs/")]),a._v("：映射日志文件夹")]),a._v(" "),t("li",[t("code",[a._v("-v /etc/localtime:/etc/localtime")]),a._v("：同步宿主机和容器的时区")]),a._v(" "),t("li",[t("code",[a._v('-e "mariadb_ip=${mariadb_ip}"')]),a._v("："),t("code",[a._v("${mariadb_ip}")]),a._v("为 MariaDB 数据库的 IP 地址(默认:本机数据库)")]),a._v(" "),t("li",[t("code",[a._v('-e "mariadb_port=${mariadb_port}"')]),a._v("："),t("code",[a._v("${mariadb_port}")]),a._v("为 MariaDB 数据库的端口(默认:本机数据库端口)")]),a._v(" "),t("li",[t("code",[a._v('-e "mariadb_user=${mariadb_user}"')]),a._v("："),t("code",[a._v("${mariadb_user}")]),a._v("为 MariaDB 数据库的用户名(默认:root)")]),a._v(" "),t("li",[t("code",[a._v('-e "mariadb_pas=${mariadb_pas}"')]),a._v("："),t("code",[a._v("${mariadb_pas}")]),a._v("为 MariaDB 数据库密码(默认:123456)")]),a._v(" "),t("li",[t("code",[a._v('-e "redis_host=${redis_host}"')]),a._v("："),t("code",[a._v("${redis_host}")]),a._v("为 Redis 的 IP 地址(默认:本机 Redis)")]),a._v(" "),t("li",[t("code",[a._v('-e "redis_port=${redis_port}"')]),a._v("："),t("code",[a._v("${redis_port}")]),a._v("为 Redis 的端口(默认:本机 Redis 端口)")]),a._v(" "),t("li",[t("code",[a._v('-e "redis_pass=${redis_pass}"')]),a._v("："),t("code",[a._v("${redis_pass}")]),a._v("为 Redis 的密码(默认:123456)")])]),a._v(" "),t("h2",{attrs:{id:"安装trojan-panel-ui"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装trojan-panel-ui"}},[a._v("#")]),a._v(" 安装Trojan Panel UI")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker Hub：https://hub.docker.com/r/jonssonyan/trojan-panel-ui")])]),a._v(" "),t("ol",[t("li",[a._v("Pull the image")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull jonssonyan/trojan-panel-ui\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("Start a container")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name trojan-panel-ui --restart always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("trojan-panel-network "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8888")]),a._v(":80 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${NGINX_CONFIG}")]),a._v(":/etc/nginx/conf.d/default.conf "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_ACME}")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${domain}")]),a._v('"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_ACME}")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${domain}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\njonssonyan/trojan-panel-ui\n")])])]),t("p",[a._v("参数解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name trojan-panel-ui")]),a._v("：定义容器名称")]),a._v(" "),t("li",[t("code",[a._v("--restart always")]),a._v("：容器随着Docker启动而启动")]),a._v(" "),t("li",[t("code",[a._v("--network=trojan-panel-network")]),a._v("：使用桥接网络")]),a._v(" "),t("li",[t("code",[a._v("-p 8888:80")]),a._v("：映射Trojan Panel UI端口")]),a._v(" "),t("li",[t("code",[a._v("-v ${NGINX_CONFIG}:/etc/nginx/conf.d/default.conf")]),a._v("：映射Nginx 配置文件")]),a._v(" "),t("li",[t("code",[a._v('-v ${CADDY_ACME}"${domain}":${CADDY_ACME}"${domain}"')]),a._v("：映射证书文件夹")])]),a._v(" "),t("h2",{attrs:{id:"安装trojan-go"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装trojan-go"}},[a._v("#")]),a._v(" 安装Trojan-go")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker Hub：https://hub.docker.com/r/p4gefau1t/trojan-go")])]),a._v(" "),t("ol",[t("li",[a._v("Pull the image")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull p4gefau1t/trojan-go\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("Start a container")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name trojan-panel-trojanGO --restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("trojan-panel-network "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${trojanGO_port}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${trojanGO_port}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${TROJANGO_CONFIG}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/etc/trojan-go/config.json"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_ACME}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_ACME}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\np4gefau1t/trojan-go\n")])])]),t("p",[a._v("参数解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name trojan-panel-ui")]),a._v("：定义容器名称")]),a._v(" "),t("li",[t("code",[a._v("--restart always")]),a._v("：容器随着Docker启动而启动")]),a._v(" "),t("li",[t("code",[a._v("--network=trojan-panel-network")]),a._v("：使用桥接网络")]),a._v(" "),t("li",[t("code",[a._v("-p ${trojanGO_port}:${trojanGO_port}")]),a._v("：映射Trojan-go端口")]),a._v(" "),t("li",[t("code",[a._v('-v ${TROJANGO_CONFIG}:"/etc/trojan-go/config.json"')]),a._v("：映射Trojan-go配置文件")]),a._v(" "),t("li",[t("code",[a._v("-v ${CADDY_ACME}:${CADDY_ACME}")]),a._v("：映射证书文件夹")])]),a._v(" "),t("h2",{attrs:{id:"安装hysteria"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装hysteria"}},[a._v("#")]),a._v(" 安装Hysteria")]),a._v(" "),t("blockquote",[t("p",[a._v("Docker Hub：https://hub.docker.com/r/tobyxdd/hysteria")])]),a._v(" "),t("ol",[t("li",[a._v("Pull the image")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull tobyxdd/hysteria\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("Start a container")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run -d --name trojan-panel-hysteria --restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n--network"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("trojan-panel-network "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${hysteria_port}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${hysteria_port}")]),a._v("/udp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8801")]),a._v(":8801 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${HYSTERIA_CONFIG}")]),a._v(":/etc/hysteria.json "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n-v "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_ACME}")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${CADDY_ACME}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\ntobyxdd/hysteria -c /etc/hysteria.json server\n")])])]),t("p",[a._v("参数解释：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("--name trojan-panel-ui")]),a._v("：定义容器名称")]),a._v(" "),t("li",[t("code",[a._v("--restart always")]),a._v("：容器随着Docker启动而启动")]),a._v(" "),t("li",[t("code",[a._v("--network=trojan-panel-network")]),a._v("：使用桥接网络")]),a._v(" "),t("li",[t("code",[a._v("-p ${hysteria_port}:${hysteria_port}/udp")]),a._v("：映射Hysteria端口")]),a._v(" "),t("li",[t("code",[a._v("-p 8801:8801")]),a._v("：映射Hysteria Prometheus 流量统计端口")]),a._v(" "),t("li",[t("code",[a._v("-v ${HYSTERIA_CONFIG}:/etc/hysteria.json")]),a._v("：映射Hysteria文件")]),a._v(" "),t("li",[t("code",[a._v("-v ${CADDY_ACME}:${CADDY_ACME}")]),a._v("：映射证书文件夹")])]),a._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),t("p",[a._v("以下是所有容器运行的状态：")]),a._v(" "),t("p",[t("img",{attrs:{src:"/docker-ps.png",alt:""}})])])}),[],!1,null,null,null);t.default=r.exports}}]);